<html>

<head>
    <title>testv5</title>
    <link rel="stylesheet" href="css/style.css" />
</head>

<body>

    <script src="js/three.js"></script>
    <script src="js/OrbitControls.js"></script>
    <script src="js/threex.domevents.js"></script>
    <script>
        const scene = new THREE.Scene();
        var mouse = new THREE.Vector3();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);

        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        window.addEventListener('resize', function () {
            var width = window.innerWidth;
            var height = window.innerHeight;
            renderer.setSize(width, height);
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
        });

        //create  the shape
        let x1 = -10;
        let y1 = 0;
        let z1 = 0;
        let x2 = 0;
        let y2 = 10;
        let z2 = 0;
        // var z = event.clientZ;
        var geometry = new THREE.Geometry();
        geometry.vertices.push(new THREE.Vector3(-10, 0, 0));
        geometry.vertices.push(new THREE.Vector3(0, 10, 0));
        var material = new THREE.LineBasicMaterial({ color: 0x0000ff });
        var line = new THREE.Line(geometry, material);
        scene.add(line);

        const domEvents = new THREEx.DomEvents(camera, renderer.domElement);
        let line1Clicked = false;

        domEvents.addEventListener(line, 'click', event => {
            event.preventDefault();        
    
            if (!line1Clicked) {
                line.material = new THREE.LineBasicMaterial({ color: 0x0888ff });
                line1Clicked = true;
                mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
                mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
                mouse.z = 0.5;
                
        console.log(mouse.x,mouse.y);
            }
            else {
                line.material = new THREE.LineBasicMaterial({ color: 0x0000ff });
                line1Clicked = false;
                  };
        });
        
        camera.position.z = 40;
        controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.minDistance = 1;
        controls.maxDistance = 1000;

        const animate = () => {
            requestAnimationFrame(animate);
            controls.update();
            renderer.render(scene, camera);
        };

        animate();

    </script>
</body>

</html>